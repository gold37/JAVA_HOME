<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>금액 세자리마다 콤마찍기</title>

<style type="text/css">
	
	div#container {
		/* border: solid 1px gray; */
		width: 90%;
		margin: 0 auto;
		padding: 2%;
	}

	input[type=text] { /* text타입 디자인  */
		width: 200px;
		height: 25px;
		font-size: 12pt;
	}
	
	input[type=button] { /* button타입 디자인  */
		width: 100px;
		height: 30px;
		font-size: 12pt;
	}
	
	
</style>

<script type="text/javascript">
	
	window.onload = function () {
		var btn1 = document.getElementById("btn1");
		
		btn1.addEventListener('click', function(e){
			
			var sText1Val = document.getElementById("text1").value;
			var sResult = func_comma(sText1Val);
			document.getElementById("text2").value = sResult; // 최종 결과물을 여기에 넣어주겠음
			
		});
		
		btn2.addEventListener('click', function(e){
			document.getElementById("text2").value=""; 
		});
		
		
	}; // end of window.onload = function ()------
	
	function func_comma(num) {
		
		/* var sResult = "안녕하세요";  */
		var sResult = ""; // 숫자가 아니면 두번째 칸 텅비워짐
		
		if(isNaN(num)) {	// isNaN(Not a Number)은 문자 또는 문자열인데 입력받은 값이 숫자가 아니라면 true,
			   	 		    //    										          숫자라면 false를 돌려줌
			alert("숫자가 아니군요!");
		
		}else {
			/* alert("숫자입니다!"); */
			/* alert( parseInt(num.length / 3) ); // 10/3 -> java: 3  javaScript:3.333333 나오기때문에 parseInt해서 정수만 나오게 함 */
			
			var nBlockCount = 0; // 세자리마다 분할되어 나온 블럭수 ex) 1,234,567 -> 3블럭 (블럭수-1=콤마수)
			var nStartCommaIndex = 0; // 콤마가 시작되는 지점(인덱스 값)
			
			if(num.length%3 != 0) {// 입력받은 num의 (string타입)길이를 3으로 나눈 나머지가 0이 아니라면 ( == 3의 배수가 아니다 )
				nBlockCount = parseInt(num.length / 3) + 1; // 뒤에 소수가 있기 때문에 +1로 토막 수 하나 더 늘림 
				nStartCommaIndex = num.length % 3;
				
			} else { // 3의 배수인 경우
				nBlockCount = num.length/3; 
				nStartCommaIndex = 3; // 123,456 -> 인덱스 [0123]
				
			}
			
			var nStartIndex = 0; // num.substring(0,1) 안에 있는 인덱스 숫자 매번 바뀌기 때문에 start 변수 하나 만들어줌
			for(var i=0; i<nBlockCount; i++) { // for(var i=0; i<4; i++)
				// nBlockCount는 반복횟수 
				
				/* 
					num --> 1234567890
				
					num.substring(0,1)+"," 1번째	1,
					num.substring(1,4)+"," 1번째	234,
					num.substring(4,7)+"," 1번째	567,
					num.substring(7,10) 4번째 890
					
				*/
				var sComma = (i < nBlockCount-1)? ",":"";
				sResult += num.substring(nStartIndex, nStartCommaIndex)+ sComma; 
				
				nStartIndex = nStartCommaIndex; // 시작 값 전에 콤마값이랑 똑같으니까 (위에 예시 참고) 
				nStartCommaIndex += 3; // 콤마 값 3씩 증가
				 
				 
			} // end of for() ---------------
		}
		
		return sResult; 
		
	}
	
</script>

</head>
<body>
	<div id="container">
		<table>
			<tr>
				<td><input type="text" id="text1" value="1234567890" /></td>
				<td><input type="button" id="btn1" value="확인" /></td>
			</tr>
			<tr>
				<td><input type="text" id="text2" /></td>
				<td><input type="button" id="btn2" value="다시" /></td>
			</tr>
		</table>
	</div>
</body>
</html>